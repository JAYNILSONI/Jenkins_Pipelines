pipeline:
  agent:
    any: true

  stages:
    - stage: "Checkout_Stage"
        steps:
          script:
            def gitRepoUrl = 'git@github.com:JAYNILSONI/Jenkins_Pipelines.git'
            checkout([
              $class: 'GitSCM',
              branches: [[name: '*/main']],
              userRemoteConfigs: [[url: gitRepoUrl]],
              extensions: [
                [$class: 'CleanBeforeCheckout'],
                [$class: 'CloneOption', noTags: false, shallow: true, depth: 1]
              ]
            ])
    - stage: "Clean_Stage"
      steps:
        - echo "Cleaning the Workspace"
        - bat 'mvn clean'

    - stage: "Build_Stage"
      steps:
        - echo "Compiling the Project"
        - bat 'mvn compile'

    - stage: "Test_Stage"
      steps:
        - echo "Testing the Project"
        - bat 'mvn test'

    - stage: "Package_Stage"
      steps:
        - echo "Packaging the Project"
        - bat 'mvn package'

    - stage: "Execute_Stage"
      steps:
        - echo "Executing the Package"
        - bat 'java -cp target/helloworld-1.0-SNAPSHOT.jar com.example.App'
